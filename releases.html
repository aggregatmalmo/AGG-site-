<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Releases — AGGREGAT</title>
  <style>
    :root{
      --ink:#111;
      --muted:#555;
      --page:#f6f6f6;
      --pill:#fff;
      --pill-border:#ccc;
      --pill-active:#000;

      /* carousel sizing */
      --gap: 6vw;                          /* space between slides */
      --slideW: clamp(260px, 62vw, 820px); /* main (center) cover width */
      --sideScale: .82;                    /* side covers scale */
      --sideOpacity: .7;                   /* side covers opacity */
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--page);color:var(--ink);font-family:Arial,Helvetica,sans-serif;line-height:1.5}

    /* Header */
    header{
      position:fixed;top:0;left:0;right:0;z-index:40;
      padding:.8rem 0;border-bottom:1px solid #ddd;
      background:rgba(255,255,255,.78);backdrop-filter:blur(8px);
    }
    .container{width:min(1200px,92vw);margin:0 auto}
    .nav{display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:600;letter-spacing:.12em;text-transform:uppercase}
    .brand .dot{display:inline-block;width:.55rem;height:.55rem;background:#c7f37a;border-radius:999px;box-shadow:0 0 12px #c7f37a;margin-right:.5rem}
    .links{display:flex;gap:.6rem}
    .links a{
      display:inline-block;padding:.35rem .7rem;border-radius:999px;
      background:var(--pill);border:1px solid var(--pill-border);
      color:#000;font-weight:600;font-size:.8rem;text-decoration:none;
    }
    .links a.active{background:var(--pill-active);color:#fff;border-color:var(--pill-active)}

    main{padding-top:98px}
    h1{margin:18px 0 8px;text-align:center}

    /* Carousel layout */
    .carousel{position:relative;max-width:100vw;overflow:hidden;margin:20px auto 60px}
    .viewport{position:relative;width:100%}
    .track{
      display:flex;align-items:center;
      gap:var(--gap);
      will-change:transform;
      transform:translate3d(0,0,0);
      transition:transform .55s ease;
      padding:0 calc(var(--gap) / 2);
    }
    .slide{
      width:var(--slideW);
      flex:0 0 var(--slideW);
      display:flex;flex-direction:column;align-items:center;
      transition:transform .55s ease, opacity .55s ease, filter .55s ease;
    }

    /* Sleeve — sharp, minimal, nice shadow */
    .sleeve{
      width:100%;background:#fff;border-radius:0;overflow:hidden;
      box-shadow:0 30px 90px rgba(0,0,0,.22), 0 10px 26px rgba(0,0,0,.18);
    }
    .sleeve img{display:block;width:100%;height:auto}

    /* Center vs side states */
    .slide:not(.active){
      transform:scale(var(--sideScale));
      opacity:var(--sideOpacity);
      filter:none; /* keep artwork colors true */
    }
    .info{display:none;margin-top:14px;text-align:center}
    .slide.active .info{display:block}
    .cat{font-weight:700;font-size:.9rem}
    .artist{font-weight:800;font-size:1.15rem;margin-top:2px}
    .title{color:var(--muted);margin-top:2px}
    .btn{display:inline-block;margin-top:.7rem;padding:.5rem 1.05rem;border-radius:999px;background:#000;color:#fff;text-decoration:none;font-weight:700;font-size:.9rem}

    /* Arrows */
    .arrow{
      position:absolute;top:50%;transform:translateY(-50%);
      width:48px;height:48px;border-radius:999px;background:#fff;border:1px solid #ccc;
      display:grid;place-items:center;font-size:1.4rem;font-weight:700;cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,.12);
      opacity:0;transition:opacity .25s ease;
      z-index:5;
    }
    .carousel:hover .arrow{opacity:1}
    .arrow:hover{background:#000;color:#fff;border-color:#000}
    .arrow.left{left:10px}
    .arrow.right{right:10px}

    /* Mobile tweaks */
    @media (max-width:720px){
      :root{
        --gap: 8vw;
        --slideW: 86vw;
        --sideScale: .86;
        --sideOpacity: .85;
      }
      .arrow{display:none} /* swipe on mobile */
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="dot"></span>AGGREGAT</div>
      <nav class="links">
        <a href="index.html">Home</a>
        <a href="releases.html" class="active">Releases</a>
        <a href="about.html">About</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>Releases</h1>

    <section class="carousel" id="carousel">
      <button class="arrow left" id="prevBtn" aria-label="Previous">‹</button>
      <div class="viewport" id="viewport">
        <div class="track" id="track">
          <!-- Order these however you want -->
          <article class="slide active">
            <div class="sleeve"><img src="assets/raft001.jpg" alt="AGG001"></div>
            <div class="info">
              <div class="cat">AGG001</div>
              <div class="artist">Various Artists</div>
              <div class="title">RAFT001 Compilation</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>

          <article class="slide">
            <div class="sleeve"><img src="assets/raddler-express.jpg" alt="AGG002"></div>
            <div class="info">
              <div class="cat">AGG002</div>
              <div class="artist">Raddler Express</div>
              <div class="title">Express EP</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>

          <article class="slide">
            <div class="sleeve"><img src="assets/speedbump-vol2.jpg" alt="AGG003"></div>
            <div class="info">
              <div class="cat">AGG003</div>
              <div class="artist">Various Artists</div>
              <div class="title">Speed Bump Vol. 2</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>

          <article class="slide">
            <div class="sleeve"><img src="assets/t001.jpg" alt="AGG004"></div>
            <div class="info">
              <div class="cat">AGG004</div>
              <div class="artist">Various Artists</div>
              <div class="title">[T001]</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>
        </div>
      </div>
      <button class="arrow right" id="nextBtn" aria-label="Next">›</button>
    </section>
  </main>

  <script>
    // Centered, minimal carousel (no autoplay). Big middle, peeking sides.
    const viewport = document.getElementById('viewport');
    const track = document.getElementById('track');
    const prev = document.getElementById('prevBtn');
    const next = document.getElementById('nextBtn');

    let slides = Array.from(track.children);
    let index = 0;

    function slideWidth(){
      // computed width of a slide (active or not)
      return slides[0].getBoundingClientRect().width;
    }
    function gap(){
      // read the computed CSS gap between slides
      const g = getComputedStyle(track).gap || '0px';
      return parseFloat(g);
    }
    function centerOffset(i){
      const w = slideWidth();
      const g = gap();
      const viewportW = viewport.clientWidth;
      // position so that slide i is centered in viewport
      const leftOfI = i * (w + g);
      const center = leftOfI + w / 2;
      return -(center - viewportW / 2);
    }
    function apply(immediate=false){
      const x = centerOffset(index);
      track.style.transition = immediate ? 'none' : 'transform .55s ease';
      track.style.transform = `translate3d(${x}px,0,0)`;
      slides.forEach((s, i) => s.classList.toggle('active', i === index));
      if (immediate) requestAnimationFrame(()=>track.style.transition='transform .55s ease');
    }

    function go(delta){
      index = (index + delta + slides.length) % slides.length;
      apply(false);
    }

    next.addEventListener('click', () => go(1));
    prev.addEventListener('click', () => go(-1));

    // Keyboard
    window.addEventListener('keydown', (e)=>{
      if (e.key === 'ArrowRight') go(1);
      if (e.key === 'ArrowLeft')  go(-1);
    });

    // Swipe/drag (basic)
    let dragging = false, startX = 0, lastX = 0;
    viewport.addEventListener('pointerdown', (e)=>{ dragging=true; startX=e.clientX; lastX=startX; viewport.setPointerCapture(e.pointerId); track.style.transition='none'; });
    viewport.addEventListener('pointermove', (e)=>{
      if(!dragging) return;
      const dx = e.clientX - lastX; lastX = e.clientX;
      const currentMatrix = new DOMMatrixReadOnly(getComputedStyle(track).transform);
      track.style.transform = `translate3d(${currentMatrix.m41 + dx}px,0,0)`;
    });
    viewport.addEventListener('pointerup', (e)=>{
      if(!dragging) return; dragging=false; track.style.transition='transform .55s ease';
      const moved = e.clientX - startX;
      const threshold = slideWidth() * 0.2; // 20% swipe to change
      if (moved < -threshold) go(1);
      else if (moved > threshold) go(-1);
      else apply(false);
    });

    // Init + keep centered on resize
    apply(true);
    window.addEventListener('resize', ()=>apply(true));
  </script>
</body>
</html>
