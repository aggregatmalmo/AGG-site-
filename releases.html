<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Releases — AGGREGAT</title>
  <style>
    :root{
      --ink:#111;
      --muted:#555;
      --page:#f6f6f6;

      /* carousel sizing (tuned so cover+text fit without scrolling) */
      --gap: 6vw;                               /* space between slides */
      --slideW: clamp(260px, 50vw, 680px);      /* main cover width */
      --sideScale: .88;                         /* scale of side peeks */
      --sideOpacity: .78;                       /* opacity of side peeks */
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--page);color:var(--ink);font-family:Arial,Helvetica,sans-serif;line-height:1.5}

    /* Header (matches your other pages) */
    header{
      position:fixed; top:0; left:0; right:0; z-index:40;
      padding:.8rem 0; border-bottom:1px solid #ddd;
      background:rgba(255,255,255,.78); backdrop-filter:blur(8px);
    }
    .container{width:min(1200px,92vw);margin:0 auto}
    .nav{display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:600;letter-spacing:.12em;text-transform:uppercase}
    .brand .dot{display:inline-block;width:.55rem;height:.55rem;background:#c7f37a;border-radius:999px;box-shadow:0 0 12px #c7f37a;margin-right:.5rem}
    .links{display:flex;gap:.6rem}
    .links a{
      display:inline-block;padding:.35rem .7rem;border-radius:999px;
      background:#fff;border:1px solid #ccc;color:#000;
      font-weight:600;font-size:.8rem;text-decoration:none;
    }
    .links a.active{background:#000;color:#fff;border-color:#000}

    main{padding-top:98px}
    h1{margin:18px 0 6px;text-align:center}

    /* Carousel layout */
    .carousel{position:relative;max-width:100vw;overflow:hidden;margin:8px auto 60px}
    .viewport{position:relative;width:100%}
    .track{
      display:flex;align-items:center;gap:var(--gap);
      will-change:transform;transform:translate3d(0,0,0);
      transition:transform .5s ease;
      padding:0 calc(var(--gap) / 2);
    }
    .slide{
      width:var(--slideW);
      flex:0 0 var(--slideW);
      display:flex;flex-direction:column;align-items:center;
      transition:transform .5s ease, opacity .5s ease, filter .5s ease;
    }

    /* Sleeve — crisp square with subtle shadow */
    .sleeve{
      width:100%;background:#fff;border-radius:0;overflow:hidden;
      box-shadow:0 24px 72px rgba(0,0,0,.20), 0 10px 28px rgba(0,0,0,.16);
    }
    .sleeve img{display:block;width:100%;height:auto}

    /* Center vs side states */
    .slide:not(.active){ transform:scale(var(--sideScale)); opacity:var(--sideOpacity); }
    .info{display:none;margin-top:12px;text-align:center}
    .slide.active .info{display:block}
    .cat{font-weight:700;font-size:.9rem}
    .artist{font-weight:800;font-size:1.12rem;margin-top:2px}
    .title{color:var(--muted);margin-top:2px}
    .btn{
      display:inline-block;margin-top:.6rem;padding:.48rem 1.05rem;border-radius:999px;
      background:#000;color:#fff;text-decoration:none;font-weight:700;font-size:.88rem
    }

    /* Arrows — tall, translucent vertical pills */
    .arrow{
      position:absolute;top:50%;transform:translateY(-50%);
      width:42px;height:120px;border-radius:18px;
      background:rgba(0,0,0,.16); /* translucent */
      border:1px solid rgba(255,255,255,.35);
      color:#fff;display:grid;place-items:center;cursor:pointer;
      box-shadow:0 10px 30px rgba(0,0,0,.18);
      opacity:.75;transition:opacity .2s, background .2s, transform .2s;
      z-index:5;backdrop-filter:blur(2px);
      font-size:1.4rem;font-weight:800;
      user-select:none;
    }
    .arrow:hover{opacity:1;background:rgba(0,0,0,.28)}
    .arrow.left{left:12px}
    .arrow.right{right:12px}

    /* Mobile tweaks */
    @media (max-width:820px){
      :root{
        --gap: 7vw;
        --slideW: 80vw;   /* a bit smaller so text fits under without scroll */
        --sideScale: .9;
        --sideOpacity: .85;
      }
      .arrow{height:96px}
    }
    @media (max-width:640px){
      .arrow{display:none} /* swipe on mobile */
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="dot"></span>AGGREGAT</div>
      <nav class="links">
        <a href="index.html">Home</a>
        <a href="releases.html" class="active">Releases</a>
        <a href="about.html">About</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>Releases</h1>

    <section class="carousel" id="carousel">
      <button class="arrow left" id="prevBtn" aria-label="Previous">‹</button>
      <div class="viewport" id="viewport">
        <div class="track" id="track">
          <!-- Order these however you want -->
          <article class="slide active">
            <div class="sleeve"><img src="assets/raft001.jpg" alt="AGG001"></div>
            <div class="info">
              <div class="cat">AGG001</div>
              <div class="artist">Various Artists</div>
              <div class="title">RAFT001 Compilation</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>

          <article class="slide">
            <div class="sleeve"><img src="assets/raddler-express.jpg" alt="AGG002"></div>
            <div class="info">
              <div class="cat">AGG002</div>
              <div class="artist">Raddler Express</div>
              <div class="title">Express EP</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>

          <article class="slide">
            <div class="sleeve"><img src="assets/speedbump-vol2.jpg" alt="AGG003"></div>
            <div class="info">
              <div class="cat">AGG003</div>
              <div class="artist">Various Artists</div>
              <div class="title">Speed Bump Vol. 2</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>

          <article class="slide">
            <div class="sleeve"><img src="assets/t001.jpg" alt="AGG004"></div>
            <div class="info">
              <div class="cat">AGG004</div>
              <div class="artist">Various Artists</div>
              <div class="title">[T001]</div>
              <a class="btn" href="#">Bandcamp</a>
            </div>
          </article>
        </div>
      </div>
      <button class="arrow right" id="nextBtn" aria-label="Next">›</button>
    </section>
  </main>

  <script>
    // centered carousel (manual only). cover+text fit; side peeks visible.
    const viewport = document.getElementById('viewport');
    const track = document.getElementById('track');
    const prev = document.getElementById('prevBtn');
    const next = document.getElementById('nextBtn');

    let slides = Array.from(track.children);
    let index = 0;

    function getGapPx(){
      const g = getComputedStyle(track).gap || '0px';
      return parseFloat(g);
    }
    function slideW(){ return slides[0].getBoundingClientRect().width; }

    function centerOffset(i){
      const w = slideW();
      const g = getGapPx();
      const leftOfI = i * (w + g);
      const centerOfI = leftOfI + w/2;
      return -(centerOfI - viewport.clientWidth/2);
    }
    function apply(immediate=false){
      const x = centerOffset(index);
      track.style.transition = immediate ? 'none' : 'transform .5s ease';
      track.style.transform = `translate3d(${x}px,0,0)`;
      slides.forEach((s, i) => s.classList.toggle('active', i === index));
      if (immediate) requestAnimationFrame(()=> track.style.transition='transform .5s ease');
    }
    function go(delta){ index = (index + delta + slides.length) % slides.length; apply(false); }

    next.addEventListener('click', () => go(1));
    prev.addEventListener('click', () => go(-1));

    // keyboard
    window.addEventListener('keydown', (e)=>{
      if (e.key === 'ArrowRight') go(1);
      if (e.key === 'ArrowLeft')  go(-1);
    });

    // basic swipe
    let dragging=false, startX=0, lastX=0;
    viewport.addEventListener('pointerdown', (e)=>{ dragging=true; startX=e.clientX; lastX=startX; viewport.setPointerCapture(e.pointerId); track.style.transition='none'; });
    viewport.addEventListener('pointermove', (e)=>{
      if(!dragging) return;
      const dx = e.clientX - lastX; lastX = e.clientX;
      const m = new DOMMatrixReadOnly(getComputedStyle(track).transform);
      track.style.transform = `translate3d(${m.m41 + dx}px,0,0)`;
    });
    viewport.addEventListener('pointerup', (e)=>{
      if(!dragging) return; dragging=false; track.style.transition='transform .5s ease';
      const moved = e.clientX - startX;
      const threshold = slideW()*0.18;
      if (moved < -threshold) go(1);
      else if (moved > threshold) go(-1);
      else apply(false);
    });

    // init + recenter on resize
    apply(true);
    window.addEventListener('resize', ()=>apply(true));
  </script>
</body>
</html>
